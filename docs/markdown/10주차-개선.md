# 병목 지점 개선
앞선 로깅, 추적, 모니터링 도구를 설치하였기 때문에 어떤 부분이 병목인지 확인 할 수 있다.

## 부하 테스트 시나리오 사용 API
- 대기열 등록, 조회
- 좌석 예약
- 좌석 결제

20,000명 VU를 둬서 실행하기 전, 먼저 2,000명으로 실행해본 결과입니다.

![11.3](https://github.com/hpp-backend-15/java-concert-joonhyeokyang/blob/step18/docs/img/11-3.png)

평균 대기시간이 577.24ms인 것으로 보아 2,000명 정도는 거뜬히 견뎌내는 것으로 보입니다.

그러나 p(95)=2.43으로 꽤나 높았습니다. 이를 추적해서 확인해봤습니다.
![11.4](https://github.com/hpp-backend-15/java-concert-joonhyeokyang/blob/step18/docs/img/11-4.png)

1초 이상 걸린 요청은 20개 이하였고, 대부분 DataSource를 가져오는데에 오래 걸린 것으로 확인됐습니다. (redis 대기열 개선 전)


 
